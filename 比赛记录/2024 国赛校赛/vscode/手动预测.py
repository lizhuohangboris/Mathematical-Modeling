import numpy as np
import pandas as pd
from statsmodels.tsa.vector_ar.var_model import VAR

# 数据
data = {
    'Year': [1970, 1971, 1972, 1973, 1974, 1975, 1976, 1977, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022],
    'CO2': [2142.61, 2196.12, 2275.71, 2320.11, 2343.85, 2537.69, 2601.09, 2780.14, 2973.80, 3018.08, 2989.44, 2957.98, 3043.90, 3159.29, 3350.34, 3359.33, 3498.58, 3685.86, 3879.22, 3999.95, 4073.56, 4208.61, 4321.28, 4525.36, 4706.61, 5134.08, 5130.25, 5168.32, 5252.21, 5199.82, 5425.51, 5624.57, 5959.54, 6677.89, 7556.11, 8431.92, 9232.26, 9845.30, 10069.85, 10696.09, 11565.47, 12572.88, 12928.23, 13485.44, 13650.13, 13479.88, 13447.14, 13710.10, 14296.57, 14606.13, 14879.56, 15632.89, 15684.63]
}

# 创建DataFrame
df = pd.DataFrame(data)

# 创建VAR模型并拟合数据
model = VAR(df[['Year', 'CO2']])
model_fit = model.fit()

# 准备2030年的输入数据
start_point = df.iloc[-1][['Year', 'CO2']].values
start_point = np.expand_dims(start_point, axis=0)  # 添加一个维度

# 使用VAR模型进行预测
forecast_2030 = model_fit.forecast(y=start_point, steps=8)
print("2030年的二氧化碳排放量预测值为:", forecast_2030[:,1][-1])  # 获取预测值的最后一个元素（CO2排放量）
